<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title>æ „é¤Šè¨ˆç®—ã‚¢ãƒ—ãƒªï¼ˆé£Ÿå“ã”ã¨ã«å¤‰ã‚ã‚‹ï¼‰</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    /* --- ãƒ™ãƒ¼ã‚·ãƒƒã‚¯ã‚¹ã‚¿ã‚¤ãƒ« --- */
    :root{
      --bg:#f6f8fb;
      --card:#fff;
      --accent:#2e8b57;
      --muted:#777;
      --radius:10px;
      --shadow:0 6px 18px rgba(0,0,0,0.08);
      --font:-apple-system,BlinkMacSystemFont,"Segoe UI","Hiragino Kaku Gothic ProN","Noto Sans JP",Roboto,Arial,sans-serif;
    }
    *{box-sizing:border-box}
    body{
      font-family:var(--font);
      margin:0;
      background:var(--bg);
      padding:20px;
      color:#222;
    }
    .container{
      max-width:780px;
      margin:0 auto;
    }

    header h1{
      margin:8px 0 18px 0;
      color:var(--accent);
      text-align:center;
    }
    .card{
      background:var(--card);
      padding:18px;
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      margin-bottom:18px;
    }

    label{display:block;font-weight:600;margin-top:10px;color:var(--muted)}
    input[type="text"], input[type="number"], select{
      width:100%;
      padding:10px;
      margin-top:6px;
      border:1px solid #ddd;
      border-radius:8px;
      font-size:15px;
    }
    .row{display:flex; gap:12px}
    .row > * {flex:1}
    button{
      display:inline-block;
      background:var(--accent);
      color:#fff;
      border:none;
      padding:12px 14px;
      border-radius:10px;
      font-weight:700;
      cursor:pointer;
      margin-top:12px;
    }
    button.secondary{
      background:#4a90e2;
    }
    .result-title{color:var(--accent);margin:0 0 8px 0}
    ul.nutri{list-style:none;padding-left:0;margin:0}
    ul.nutri li{padding:8px 0;border-bottom:1px dashed #eee}

    .muted{color:var(--muted);font-size:13px;margin-top:8px}

    /* small screens */
    @media (max-width:480px){
      .row{flex-direction:column}
    }

    /* ãƒ˜ãƒ«ãƒ—é ˜åŸŸ */
    details{margin-top:10px}
    .small{font-size:13px;color:var(--muted)}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>ğŸ½ï¸ æ „é¤Šè¨ˆç®—ï¼ˆé£Ÿå“ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å¯¾å¿œï¼‰</h1>
      <p class="small">ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‹ã‚‰é£Ÿå“ã‚’é¸ã¶ã‹è‡ªç”±å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚ã‚°ãƒ©ãƒ æ•°ã‚’å…¥ã‚Œã¦ã€Œè¨ˆç®—ã€ã‚’æŠ¼ã™ã¨ã€ãã®é£Ÿå“ã®æ „é¤Šç´ ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
    </header>

    <section class="card">
      <label for="foodInput">é£Ÿå“ï¼ˆé¸æŠ or å…¥åŠ›ï¼‰</label>

      <!-- datalistã§å€™è£œã‚’è¡¨ç¤º -->
      <input list="foodList" id="foodInput" placeholder="ä¾‹: ç™½ã”ã¯ã‚“, ã‚«ãƒ¬ãƒ¼ãƒ©ã‚¤ã‚¹, é¶ã‚€ã­è‚‰">
      <datalist id="foodList"></datalist>

      <label for="grams">é‡ã•ï¼ˆgï¼‰</label>
      <input type="number" id="grams" placeholder="ä¾‹: 200" min="1">

      <div class="row">
        <button id="calcBtn">æ „é¤Šè¨ˆç®—</button>
        <button class="secondary" id="addBtn">é£Ÿå“ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ãƒ»ç·¨é›†</button>
      </div>

      <div id="note" class="muted">
        â€» ç™»éŒ²æ¸ˆã¿ã®é£Ÿå“ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰è¨ˆç®—ã—ã¾ã™ã€‚è¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆä¾‹: ã€Œã”ã¯ã‚“ã€ã€Œé¶ã€ã€Œç‰›ã€ã€Œã‚«ãƒ¬ãƒ¼ã€ã€Œé‡èœã€ã€Œåµã€ã€Œé­šã€ã€Œã‚Šã‚“ã”ã€ï¼‰ã§è¿‘ã„é£Ÿå“ã‚’æ¨å®šã—ã¾ã™ã€‚
      </div>
    </section>

    <section id="resultCard" class="card" style="display:none">
      <h3 class="result-title" id="resultTitle"></h3>
      <ul class="nutri" id="resultList"></ul>
      <div class="muted" id="sourceNote"></div>
    </section>

    <!-- é£Ÿå“ãƒ‡ãƒ¼ã‚¿ã®è¿½åŠ ãƒ»ç·¨é›†ãƒ‘ãƒãƒ« -->
    <section id="editorCard" class="card" style="display:none">
      <h3 style="margin-top:0">é£Ÿå“ãƒ‡ãƒ¼ã‚¿ã®è¿½åŠ  / ç·¨é›†ï¼ˆå˜ä½ï¼š100gã‚ãŸã‚Šï¼‰</h3>

      <label>é£Ÿå“å</label>
      <input type="text" id="editName" placeholder="ä¾‹: ã•ã°ï¼ˆç„¼ãï¼‰">

      <div class="row">
        <div>
          <label>ã‚¨ãƒãƒ«ã‚®ãƒ¼(kcal)</label>
          <input type="number" id="editCal" placeholder="ä¾‹: 200">
        </div>
        <div>
          <label>ãŸã‚“ã±ãè³ª(g)</label>
          <input type="number" id="editProtein" placeholder="ä¾‹: 25">
        </div>
      </div>

      <div class="row">
        <div>
          <label>è„‚è³ª(g)</label>
          <input type="number" id="editFat" placeholder="ä¾‹: 11">
        </div>
        <div>
          <label>ç‚­æ°´åŒ–ç‰©(g)</label>
          <input type="number" id="editCarb" placeholder="ä¾‹: 0">
        </div>
      </div>

      <div class="row">
        <div>
          <label>ãƒ“ã‚¿ãƒŸãƒ³A(Âµg)</label>
          <input type="number" id="editVA" placeholder="ä¾‹: 50">
        </div>
        <div>
          <label>ãƒ“ã‚¿ãƒŸãƒ³C(mg)</label>
          <input type="number" id="editVC" placeholder="ä¾‹: 2">
        </div>
      </div>

      <div class="row">
        <div>
          <label>ã‚«ãƒ«ã‚·ã‚¦ãƒ (mg)</label>
          <input type="number" id="editCa" placeholder="ä¾‹: 20">
        </div>
        <div>
          <label>é‰„(mg)</label>
          <input type="number" id="editFe" placeholder="ä¾‹: 0.5">
        </div>
      </div>

      <div style="margin-top:12px">
        <button id="saveFoodBtn">ä¿å­˜ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜ã•ã‚Œã¾ã™ï¼‰</button>
        <button id="cancelEditBtn" style="background:#777;margin-left:8px">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
      </div>

      <details>
        <summary class="small">â€»ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜ã«ã¤ã„ã¦ï¼ˆé–‹ãï¼‰</summary>
        <p class="small">è¿½åŠ ã¾ãŸã¯ç·¨é›†ã—ãŸé£Ÿå“ãƒ‡ãƒ¼ã‚¿ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã® localStorage ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚åˆ¥ã®ç«¯æœ«ã§ä½¿ã†å ´åˆã‚„å®Œå…¨ã«æ¶ˆã—ãŸã„å ´åˆã¯ã€è©²å½“ãƒ–ãƒ©ã‚¦ã‚¶ã§ localStorage ã‚’ã‚¯ãƒªã‚¢ã—ã¦ãã ã•ã„ã€‚</p>
      </details>
    </section>

    <footer style="text-align:center;margin-top:16px" class="small muted">
      ä½¿ã„æ–¹ï¼šé£Ÿå“ã‚’é¸ã¶ã‹å…¥åŠ› â†’ é‡ã•å…¥åŠ› â†’ ã€Œæ „é¤Šè¨ˆç®—ã€ã‚’æŠ¼ã™ã€‚ãƒ‡ãƒ¼ã‚¿ãŒãªã‘ã‚Œã°ã€Œé£Ÿå“ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ã€ã§ç™»éŒ²ã§ãã¾ã™ã€‚
    </footer>
  </div>

<script>
/* ------------------------
   åˆæœŸé£Ÿå“ãƒ‡ãƒ¼ã‚¿ï¼ˆper 100g ã®å€¤ï¼‰
   æ•°å€¤ã¯æ¦‚ç®—ã®ã‚µãƒ³ãƒ—ãƒ«ã§ã™ã€‚å¿…è¦ãªã‚‰ç·¨é›†ã—ã¦ãã ã•ã„ã€‚
   ------------------------ */
const defaultFoods = {
  "ç™½ã”ã¯ã‚“": { cal:168, protein:2.5, fat:0.3, carb:37.1, va:0, vc:0, ca:5, fe:0.2 },
  "ã‚«ãƒ¬ãƒ¼ãƒ©ã‚¤ã‚¹": { cal:150, protein:3.0, fat:6.0, carb:20.0, va:200, vc:2, ca:30, fe:1.2 },
  "é¶ã‚€ã­è‚‰(çš®ãªã—,ç„¼ã)": { cal:165, protein:31.0, fat:3.6, carb:0, va:10, vc:0, ca:15, fe:1.0 },
  "é®­(ç„¼ã)": { cal:200, protein:25.0, fat:11.0, carb:0, va:50, vc:0, ca:20, fe:0.5 },
  "ç‰›è‚‰(ç„¼ã)": { cal:250, protein:26.0, fat:15.0, carb:0, va:5, vc:0, ca:10, fe:2.6 },
  "åµ(ã‚†ã§)": { cal:155, protein:13.0, fat:11.0, carb:1.1, va:160, vc:0, ca:50, fe:1.2 },
  "ãƒŸãƒƒã‚¯ã‚¹ã‚µãƒ©ãƒ€(ç”Ÿ)": { cal:25, protein:1.5, fat:0.2, carb:4.0, va:300, vc:15, ca:30, fe:1.0 },
  "ã‚Šã‚“ã”(ç”Ÿ)": { cal:52, protein:0.3, fat:0.2, carb:14.0, va:54, vc:4.6, ca:6, fe:0.1 }
};

/* localStorageã‚­ãƒ¼ */
const LS_KEY = "my_food_db_v1";

/* ãƒ¦ãƒ¼ã‚¶ç™»éŒ²æ¸ˆã¿ãƒ‡ãƒ¼ã‚¿ã¨åˆæœŸãƒ‡ãƒ¼ã‚¿ã‚’ãƒãƒ¼ã‚¸ã—ã¦ä½¿ã† */
function loadFoodDB(){
  let db = {};
  // default ã‚’ã¾ãšå…¥ã‚Œã‚‹
  Object.assign(db, defaultFoods);
  // localStorageã«ã‚ã‚Œã°ä¸Šæ›¸ãï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¿½åŠ ãƒ‡ãƒ¼ã‚¿ï¼‰
  try {
    const raw = localStorage.getItem(LS_KEY);
    if(raw){
      const userFoods = JSON.parse(raw);
      Object.assign(db, userFoods);
    }
  } catch(e){ console.warn("localStorageèª­ã¿è¾¼ã¿å¤±æ•—", e); }
  return db;
}

let foodDB = loadFoodDB();

/* datalist ã‚’æ›´æ–° */
function refreshDatalist(){
  const dl = document.getElementById("foodList");
  dl.innerHTML = "";
  const names = Object.keys(foodDB).sort((a,b)=>a.localeCompare(b,'ja'));
  for(const name of names){
    const opt = document.createElement("option");
    opt.value = name;
    dl.appendChild(opt);
  }
}
refreshDatalist();

/* --- ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ --- */
function scale(nPer100g, grams){
  // grams ã«åˆã‚ã›ã¦è¨ˆç®—ã—ã¦ã€å°æ•°ã¯1ã€œ2æ¡ã«æ•´ãˆã‚‹
  const val = (nPer100g * grams / 100);
  // å°æ•°ç‚¹ä»¥ä¸‹ã¯å¿…è¦ã«å¿œã˜ã¦è¡¨ç¤ºï¼ˆæ•´æ•°ãªã‚‰æ•´æ•°ï¼‰
  return Number(Math.round(val * 100) / 100);
}

/* ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§è¿‘ã„é£Ÿå“ã‚’æ¨å®šã™ã‚‹ï¼ˆè¦‹ã¤ã‹ã‚‰ãªã„ã¨ãã®è£œåŠ©ï¼‰ */
function guessFoodByKeyword(name){
  const n = name.toLowerCase();
  if(n.includes("ã”ã¯ã‚“") || n.includes("ãƒ©ã‚¤ã‚¹") || n.includes("ç±³")) return "ç™½ã”ã¯ã‚“";
  if(n.includes("ã‚«ãƒ¬ãƒ¼")) return "ã‚«ãƒ¬ãƒ¼ãƒ©ã‚¤ã‚¹";
  if(n.includes("é¶") || n.includes("ãƒã‚­ãƒ³")) return "é¶ã‚€ã­è‚‰(çš®ãªã—,ç„¼ã)";
  if(n.includes("é®­") || n.includes("ã•ã‘") || n.includes("ã‚µãƒ¼ãƒ¢ãƒ³")) return "é®­(ç„¼ã)";
  if(n.includes("ç‰›") || n.includes("ãƒ“ãƒ¼ãƒ•")) return "ç‰›è‚‰(ç„¼ã)";
  if(n.includes("åµ") || n.includes("ãŸã¾ã”")) return "åµ(ã‚†ã§)";
  if(n.includes("ã‚µãƒ©ãƒ€") || n.includes("é‡èœ")) return "ãƒŸãƒƒã‚¯ã‚¹ã‚µãƒ©ãƒ€(ç”Ÿ)";
  if(n.includes("ã‚Šã‚“ã”") || n.includes("æœç‰©") || n.includes("ãƒ•ãƒ«ãƒ¼ãƒ„")) return "ã‚Šã‚“ã”(ç”Ÿ)";
  return null;
}

/* --- è¨ˆç®—å‡¦ç† --- */
document.getElementById("calcBtn").addEventListener("click", ()=>{
  const foodName = document.getElementById("foodInput").value.trim();
  const gramsRaw = document.getElementById("grams").value;
  const grams = Number(gramsRaw);

  const resultCard = document.getElementById("resultCard");
  const resultTitle = document.getElementById("resultTitle");
  const resultList = document.getElementById("resultList");
  const sourceNote = document.getElementById("sourceNote");

  if(!foodName){
    alert("é£Ÿå“åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆå€™è£œã‹ã‚‰é¸ã¶ã‹è‡ªç”±å…¥åŠ›ã§ãã¾ã™ï¼‰");
    return;
  }
  if(!grams || grams <= 0){
    alert("æ­£ã—ã„ã‚°ãƒ©ãƒ æ•°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆ1ä»¥ä¸Šï¼‰");
    return;
  }

  // ãã£ã¡ã‚Šä¸€è‡´ã™ã‚‹é£Ÿå“ã‚’æ¢ã™ï¼ˆå³å¯†ä¸€è‡´ï¼‰
  if(foodDB[foodName]){
    const base = foodDB[foodName];
    showResult(foodName, base, grams, "ç™»éŒ²ãƒ‡ãƒ¼ã‚¿ï¼ˆ100gã‚ãŸã‚Šï¼‰ã‚’ä½¿ç”¨");
    return;
  }

  // ã‚ˆãã‚ã‚‹å ´åˆï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€Œã‚«ãƒ¬ãƒ¼ 200ã€ãªã©ã§å…¥åŠ›ã€‚ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¨å®š
  const guessed = guessFoodByKeyword(foodName);
  if(guessed && foodDB[guessed]){
    const base = foodDB[guessed];
    showResult(guessed + "ï¼ˆæ¨å®šï¼‰", base, grams, `å…¥åŠ› "${foodName}" ã‚’ "${guessed}" ã¨æ¨å®šã—ã¦è¨ˆç®—`);
    return;
  }

  // è¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è¿½åŠ ã‚’ä¿ƒã™
  const add = confirm(`é£Ÿå“ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚\n"${foodName}" ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ã—ã¾ã™ã‹ï¼Ÿ\nï¼ˆã€Œã„ã„ãˆã€ã‚’æŠ¼ã™ã¨æ¨å®šãŒè©¦ã¿ã‚‰ã‚Œã¾ã™ï¼‰`);
  if(add){
    openEditorFor(foodName);
    return;
  } else {
    // æ¨å®šã‚’è©¦ã¿ã‚‹ï¼ˆä¼¼ãŸã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¢ã—ï¼‰
    // æ¢ã™ï¼šé£ŸDBå†…ã§éƒ¨åˆ†ä¸€è‡´ã™ã‚‹ã‚‚ã®ã‚’æ¢ã™
    const candidates = Object.keys(foodDB).filter(n => n.indexOf(foodName) !== -1 || foodName.indexOf(n) !== -1);
    if(candidates.length > 0){
      const pick = candidates[0];
      const base = foodDB[pick];
      showResult(pick + "ï¼ˆéƒ¨åˆ†ä¸€è‡´ï¼‰", base, grams, `éƒ¨åˆ†ä¸€è‡´ "${pick}" ã‚’ä½¿ç”¨`);
      return;
    }
    alert("æ¨å®šã‚‚ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚é£Ÿå“ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚");
  }
});

function showResult(displayName, base, grams, note){
  const resultCard = document.getElementById("resultCard");
  const resultTitle = document.getElementById("resultTitle");
  const resultList = document.getElementById("resultList");
  const sourceNote = document.getElementById("sourceNote");

  resultTitle.textContent = `${displayName} ${grams}g ã®æ „é¤Šç´ `;
  // ä¸»è¦ãªæ „é¤Šã‚’è¨ˆç®—
  const cal = scale(base.cal, grams);
  const protein = scale(base.protein, grams);
  const fat = scale(base.fat, grams);
  const carb = scale(base.carb, grams);
  const va = scale(base.va, grams);
  const vc = scale(base.vc, grams);
  const ca = scale(base.ca, grams);
  const fe = scale(base.fe, grams);

  resultList.innerHTML = `
    <li>ã‚¨ãƒãƒ«ã‚®ãƒ¼: <strong>${cal}</strong> kcal</li>
    <li>ãŸã‚“ã±ãè³ª: <strong>${protein}</strong> g</li>
    <li>è„‚è³ª: <strong>${fat}</strong> g</li>
    <li>ç‚­æ°´åŒ–ç‰©: <strong>${carb}</strong> g</li>
    <li>ãƒ“ã‚¿ãƒŸãƒ³A: <strong>${va}</strong> Âµg</li>
    <li>ãƒ“ã‚¿ãƒŸãƒ³C: <strong>${vc}</strong> mg</li>
    <li>ã‚«ãƒ«ã‚·ã‚¦ãƒ : <strong>${ca}</strong> mg</li>
    <li>é‰„: <strong>${fe}</strong> mg</li>
  `;
  sourceNote.textContent = note;
  resultCard.style.display = "block";
}

/* --- ç·¨é›†ãƒ‘ãƒãƒ«ã®åˆ¶å¾¡ --- */
document.getElementById("addBtn").addEventListener("click", ()=>{
  openEditorFor(""); // ç©ºã®ç·¨é›†ç”»é¢
});

document.getElementById("cancelEditBtn").addEventListener("click", ()=>{
  document.getElementById("editorCard").style.display = "none";
});

function openEditorFor(prefillName){
  document.getElementById("editorCard").style.display = "block";
  document.getElementById("editName").value = prefillName || "";
  document.getElementById("editCal").value = "";
  document.getElementById("editProtein").value = "";
  document.getElementById("editFat").value = "";
  document.getElementById("editCarb").value = "";
  document.getElementById("editVA").value = "";
  document.getElementById("editVC").value = "";
  document.getElementById("editCa").value = "";
  document.getElementById("editFe").value = "";
}

/* ä¿å­˜ãƒœã‚¿ãƒ³ */
document.getElementById("saveFoodBtn").addEventListener("click", ()=>{
  const name = document.getElementById("editName").value.trim();
  if(!name){ alert("é£Ÿå“åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"); return; }

  // æ•´æ•°/å°æ•°ã¯ Number ã§å¤‰æ›ã€‚ç©ºæ¬„ã¯0æ‰±ã„
  const newItem = {
    cal: Number(document.getElementById("editCal").value) || 0,
    protein: Number(document.getElementById("editProtein").value) || 0,
    fat: Number(document.getElementById("editFat").value) || 0,
    carb: Number(document.getElementById("editCarb").value) || 0,
    va: Number(document.getElementById("editVA").value) || 0,
    vc: Number(document.getElementById("editVC").value) || 0,
    ca: Number(document.getElementById("editCa").value) || 0,
    fe: Number(document.getElementById("editFe").value) || 0
  };

  // ãƒ­ãƒ¼ã‚«ãƒ« DB ã‚’æ›´æ–°ã—ã¦ä¿å­˜
  foodDB[name] = newItem;
  try {
    // localStorageã«ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¿½åŠ åˆ†ã ã‘ä¿å­˜ï¼ˆåˆæœŸdefaultã¯é™¤ãï¼‰
    // å–ã‚Šå‡ºã—ã¦åˆæœŸdefaultã‚’é™¤ã„ãŸã‚‚ã®ã‚’ä¿å­˜
    const toSave = {};
    for(const k in foodDB){
      if(!defaultFoods[k]) toSave[k] = foodDB[k];
    }
    localStorage.setItem(LS_KEY, JSON.stringify(toSave));
    refreshDatalist();
    alert("ä¿å­˜ã—ã¾ã—ãŸï¼ˆã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜ã•ã‚Œã¾ã™ï¼‰");
    document.getElementById("editorCard").style.display = "none";
  } catch(e){
    alert("ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ: " + e);
  }
});

/* --- èµ·å‹•æ™‚ã«æ—¢å­˜ã®æƒ…å ±ãŒã‚ã‚Œã° datalist ã‚’åæ˜  --- */
refreshDatalist();

/* optional: Enterã§è¨ˆç®— */
document.getElementById("grams").addEventListener("keydown", (e)=>{
  if(e.key === "Enter") document.getElementById("calcBtn").click();
});
document.getElementById("foodInput").addEventListener("keydown", (e)=>{
  if(e.key === "Enter") document.getElementById("calcBtn").click();
});
</script>
</body>
</html>
